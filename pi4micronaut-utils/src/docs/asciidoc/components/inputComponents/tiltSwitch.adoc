:imagesdir: img/

ifndef::rootpath[]
:rootpath: ../../
endif::rootpath[]

ifdef::rootpath[]
:imagesdir: {rootpath}{imagesdir}
endif::rootpath[]

==== Tilt Switch

[.text-right]
https://github.com/oss-slu/Pi4Micronaut/edit/develop/pi4micronaut-utils/src/docs/asciidoc/components/inputComponents/tiltSwitch.adoc[Improve this doc]

===== Overview

This section provides details of a tilt switch sensor implementation,
including its circuit diagram, required hardware components,
assembly instructions, and functionality.

===== Components

. Tilt switch module
. LED light
. 1 x 220立 resistor
. 1 x 1k立 resistor
. Breadboard
. Jumper wires
. Power source

===== Assembly Instructions

TBD

===== Circuit Diagram

image:tiltSwitch_CD.png[]

*Schematic Diagram:*

image:tiltSwitch_SD.png[]

===== Functionality

When the tilt switch is tilted or its orientation is changed, a metal ball moves inside the capsule
and opens or closes an electrical circuit, altering the state of the switch.

===== Testing the Circuit

Use the below commands to test the tilt switch.

* `/enable`  - turns on tilt switch
[source, bash]
----
$ curl http://localhost:8080/tiltSwitch/enable
----

* `/disable` - turns off tilt switch
[source, bash]
----
$ curl http://localhost:8080/tiltSwitch/disable
----

===== Troubleshooting

- LED not lighting up once it has been enabled and is being tilted:
. Make sure that all the pins on the tilt switch are in the right spot and that everything is receiving power.
. Also make sure that everything is properly secured to the breadboard.
. Ensure a 220立 is being used for the LED and 1k立 resistor for the tilt switch.

===== YAML Configuration

The YAML configuration for the LED is as follows:

[source, yaml]
----
digital-output:
  led2:
    name: LED Output
    address: 26
    shutdown: HIGH
    initial: HIGH
    provider: pigpio-digital-output
----
So, the output of the LED is connected to GPIO 26.

The YAML configuration for the tilt switch is as follows:

[source, yaml]
----
digital-input:
  tilt-switch-input:
    name: Tilt Switch Input
    address: 17
    pull: PULL_DOWN
    debounce: 5000
    provider: pigpio-digital-input
----
So, the input of the tilt switch is connected to GPIO 17.

===== Constructor and Methods

To see the constructor and methods of our TiltSwitchHelper class see our javadoc link:https://oss-slu.github.io/Pi4Micronaut/javadoc/com/opensourcewithslu/inputdevices/TiltSwitchHelper.html[here]
for more details.

===== An Example Controller

====== This controller uses the tilt switch to light up a LED light once it is tilted

[source, java]
----
include::../../../../../../components/src/main/java/com/opensourcewithslu/components/controllers/TiltSwitchController.java[tag=ex]
----