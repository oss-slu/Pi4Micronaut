<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Reed Switch</title>
<style>
body {
	font-family: sans-serif;
	line-height: 1.5;
	padding: 0;
	margin: 0;
	overflow-y: hidden;
	overflow-x: hidden;
}

/*Needed to ensure that [.text-right] in the .adoc files align to the right. Otherwise they align
to the left of the doc.*/
.text-right{
	text-align: right;
}

.text-right:hover{
	text-decoration: underline;
}

.anchor{
	color: green;
	text-decoration: none;
}

.article {
	display: grid;
	grid-template-areas: "nav content";
	grid-template-columns: 20em 1fr;
	grid-template-rows: auto;
}

a {
	text-decoration: none;
}

#header {
	background-color: black;
	background-image: url('img/Pi4Micronaut-RM.png');
	background-size: contain;
	background-position: left;
	background-repeat: no-repeat;
	grid-area: nav;
	position: fixed;
	width: 100%;
	vertical-align: center;
	max-height:100px;
	height: 100%;
	display: inline-block;
	z-index: 10;
	margin-bottom: 0;
}

#header a{
	color:white;
	margin-right: 20px;
}

#toc {
	margin-top: 13px;
	padding-top: 1em;
	padding-left: 1em;
	padding-right: 1em;
	padding-bottom: 2em;
	float: left;
	max-height: 89.5%;
	height: 100%;
	overflow-y: auto;
	position: fixed;
	box-sizing: border-box;
	background-color: gainsboro;
	max-width: 20%;
	width: 20%;
}


#toc a {
	color: royalblue;
}

#toc li {
	padding-bottom: .6em;
}

#toc ul {
	list-style: none;
	margin: 0;
	padding: 0;
}

#toc ul ul {
	padding-left: 1.4em;
}

#toctitle {
	font-weight: bold;
	color: black;
}

h1 {
	text-indent: -9999px;
	font-size: 2em;
	background-color: transparent;
	padding: .6em;
	margin: 0;
	width: 100%;
	color: white;
	height: 50%;
	vertical-align: center;
}

h2 {
	margin-top: 2px;
	margin-bottom: 2px;
}


/*.toc2{*/
/*	float: left;*/
/*}*/

#toc a:hover {
	text-decoration: underline;
}

#content {
	background-color: white;
	overflow-y: auto;
	grid-area: content;
	padding: 1em;
	max-width: 80%;
	width: 100%;
	position: fixed;
	z-index: 1;
	max-height: 80%;
	height: 100%;
	margin-left: 20%;
	margin-right: 0;
	margin-bottom: 1%;
	margin-top: 8%;
	padding-bottom: 100px;
}


.hljs{
	background: #cacbca !important;
}

#content img {
	max-width: 100%;
}

.details{
	float: right;
	position: absolute;
	bottom: 0px;
	visibility: hidden;
	width: 0;
	height: 0;
}

pre {
	background-color: #f7f7f8;
	padding: 1em;
	word-wrap: break-word;
	white-space: pre-wrap;
}

table {
	grid: none;
	frame: none;
}

td, th {
	border: 1px solid gray;
	padding: .4em;
}

th {
	background-color: #f9f9f9;
	text-align: left;
}

#footer-text {
	float: right;
	position: absolute;
	bottom: 0px;
	visibility: hidden;
	width: 0;
	height: 0;
}

.title{
	font-style: italic;
	padding-top: 2em;
}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect3">
<h4 id="_reed_switch">Reed Switch</h4>
<div class="paragraph text-right">
<p><a href="https://github.com/oss-slu/Pi4Micronaut/edit/develop/pi4micronaut-utils/src/docs/asciidoc/components/inputComponents/reedSwitch.adoc">Improve this doc</a></p>
</div>
<div class="sect4">
<h5 id="_overview">Overview</h5>
<div class="paragraph">
<p>This document describes a reed (magnetic) switch sensor implementation: required hardware, assembly instructions, circuit diagrams, configuration, and testing. A reed switch is a small magnetic sensor that closes a contact when a magnet is brought near.</p>
</div>
</div>
<div class="sect4">
<h5 id="_components">Components</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Reed switch module</p>
</li>
<li>
<p>2 x LED lights</p>
</li>
<li>
<p>2 x 220Ω resistors</p>
</li>
<li>
<p>Breadboard</p>
</li>
<li>
<p>Jumper wires</p>
</li>
<li>
<p>Power source (3.3V)</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_assembly_instructions">Assembly Instructions</h5>
<div class="paragraph">
<p>Connect the reed switch, LEDs, resistors, and wiring on the breadboard as shown in the circuit diagrams.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ground: connect the GND pin of the reed switch to the breadboard ground.</p>
</li>
<li>
<p>Power: connect VCC of the reed switch to 3.3V on the breadboard.</p>
</li>
<li>
<p>IO: connect the reed switch output pin (DO) to GPIO 17 on the Raspberry Pi (digital input).</p>
</li>
<li>
<p>LEDs: use a 220Ω resistor in series with each LED. Connect the LED cathodes to ground and the anodes to the GPIO outputs.</p>
</li>
<li>
<p>LED GPIOs: connect the two LED anodes to GPIO 22 and GPIO 27 respectively (digital outputs).</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_circuit_diagram">Circuit Diagram</h5>
<div class="paragraph">
<p><span class="image"><img src="../../img/reedSwitchCD.png" alt="reedSwitchCD"></span></p>
</div>
<div class="paragraph">
<p><strong>Schematic Diagram:</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../img/reedSwitch_schematic.png" alt="reedSwitch schematic"></span>
<span class="image"><img src="../../img/reedSwitch_schematic2.png" alt="reedSwitch schematic2"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_functionality">Functionality</h5>
<div class="paragraph">
<p>When a magnet approaches the reed switch the internal contacts change state (close). In our example controller we read this digital input and drive one LED for detection and another for no detection.</p>
</div>
</div>
<div class="sect4">
<h5 id="_testing_the_circuit">Testing the Circuit</h5>
<div class="paragraph">
<p>Use the following HTTP endpoints to interact with the reed switch controller.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/enable</code>  - enable reed switch handling</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ curl http://localhost:8080/reedSwitch/enable</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/disable</code> - disable reed switch handling</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ curl http://localhost:8080/reedSwitch/disable</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_troubleshooting">Troubleshooting</h5>
<div class="ulist">
<ul>
<li>
<p>LED does not light when expected:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify VCC and GND are correctly wired and the breadboard power rail is powered.</p>
</li>
<li>
<p>Ensure LEDs are oriented correctly (anode to resistor &#8594; GPIO, cathode to GND).</p>
</li>
<li>
<p>Confirm resistors are 220Ω.</p>
</li>
<li>
<p>Check the reed switch wiring: DO connected to GPIO 17, VCC to 3.3V, GND to ground.</p>
</li>
</ol>
</div>
</li>
<li>
<p>False triggers or bouncing:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify the configured pull-up/pull-down and debounce values in YAML.</p>
</li>
<li>
<p>Move wires away from noisy power lines; shorten jumper wires where possible.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_yaml_configuration">YAML Configuration</h5>
<div class="paragraph">
<p>A BCM numbering system is used. More info can be found <a href="https://pinout.xyz">here</a>.</p>
</div>
<div class="paragraph">
<p>The YAML configuration for the reed switch input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">digital-input:
  reed-switch-input:
    name: Reed Switch
    address: 17
    pull: PULL_UP
    debounce: 200
    provider: pigpio-digital-input</code></pre>
</div>
</div>
<div class="paragraph">
<p>The YAML configuration for the first LED:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">digital-output:
  led3:
    name: LED Output
    address: 22
    shutdown: LOW
    initial: HIGH
    provider: pigpio-digital-output</code></pre>
</div>
</div>
<div class="paragraph">
<p>The YAML configuration for the second LED:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">digital-output:
  led4:
    name: LED Output
    address: 27
    shutdown: HIGH
    initial: HIGH
    provider: pigpio-digital-output</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_constructor_and_methods">Constructor and Methods</h5>
<div class="paragraph">
<p>To see the constructor and methods of the ReedSwitchHelper class see the javadoc:
<a href="https://oss-slu.github.io/Pi4Micronaut/javadoc/com/opensourcewithslu/inputdevices/ReedSwitchHelper.html" class="bare">https://oss-slu.github.io/Pi4Micronaut/javadoc/com/opensourcewithslu/inputdevices/ReedSwitchHelper.html</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_an_example_controller">An Example Controller</h5>
<div class="sect5">
<h6 id="_this_controller_uses_the_reed_switch_to_light_up_led_lights_when_activated">This controller uses the reed switch to light up LED lights when activated</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Unresolved directive in reedSwitch.adoc - include::../../../../../../components/src/main/java/com/opensourcewithslu/components/controllers/ReedSwitchController.java[tag=ex]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v1.2<br>
Last updated 2025-11-17 22:23:32 UTC
</div>
</div>
</body>
</html>